<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python 2.7 wrapper - Worldpay Within</title>
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/app.css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">    
  </head>
  <body>
    <div class="row">
      <div class="large-12 columns">
        <img style="padding-top: 5px; padding-bottom: 5px;" src="images/worldpaylogosmall.png" alt="Worldpay Logo"/>
        <div style="padding-left: 5px; color: white; background-color: red;"><a class="whiteLink" href="index.html"><h1 style="font-size: 1.8em !important;">Worldpay Within Documentation</h1></a></div>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <div class="callout">
          

          <!--
                <form>
                  <div class="row">
                    <div class="large-12 columns">
                      <label>Search for a topic or question</label>
                    </div>
                    <div class="large-12 columns">
                      <input type="text" placeholder="Search for a topic or question" />
                    </div>
                  </div>
                </form>
-->

              <div class="row">
            
                    <div class="large-12 columns">
<!-- Insert page content below -->




<h2>The Python 2.7 wrapper</h2>

<h3>Quick start</h3>

<ol>
<li>Download or clone the repo from github</li>
<li>Download the latest exectubles for the rpc-agent in the release on github</li>
<li>Put the python wrapper in a folder where you want to use it</li>
<li>Copy in the rpc-agent of your choice e.g. if mac 64 bit copy in the rpc-agent-mac-64 and rename to rpc-agent</li>
<li>Download the python Thrift library from apache</li>
<li>Extract this somewhere useful, change to the directory and change to './lib/py'</li>
<li>Run the command 'sudo python setup.py install' to install thrift</li>
<li>Edit the device name and description in the runProducer.py runConsumer.py and runProducerCallbacks.py</li>
<li>Setup a DEV account on online.worldpay.com</li>
<li>Copy the API keys to the runProducer.py and runProducerCallbacks.py, client key first, service key second</li>
</ol>

<h3>The python code</h3>

<h4>Sample apps</h4>
<p>runConsumer.py - runs the example consumer</p>
<p>runProducer.py - runs the example producer</p>
<p>runProducerCallbacks.py - runs the example producer with the call back functionality</p>

<h4>The wrapper methods</h4>
<p>WPWithinWrapperImpl.py - contains the api service methods which you should use</p>

<ul>
<li>setup - Sets up the wrapper to be able to start communicating with the underlying SDK.</li>

<li>addService - Adds a service of type WWSerive to the producer, used if the device you are operating on is a producer, if added to a device you intend as a consumer this will give that device producer functionality.</li>

<li>removeService - This removes the service from the producer</li>

<li>initConsumer - This initiates the device as a consumer, which enables it to find services, negotiate prices, make payments and receive services.</li>

<li>initProducer - This initiates the device as a producer / or initialises the devices producer capability.</li>

<li>getDevice - This is able to provide back details of the the current device that the SDK is running on, and it credentials / information</li>

<li>startServiceBroadcast - This enables the producer device to start broadcasting itself via UDP broadcast over the network to notifiy devices it is available to be consumed.</li>

<li>stopServiceBroadcast - This method stops the SDK from broadcasting the current service messages that it is broadcasting</li>

<li>deviceDiscovery - This enables the consumer device to discovery other devices (producers) on the network that are UDP broadcasting.</li>

<li>requestServices - Get a list of services that are avaialble from the broadcasting device.</li>

<li>getServicePrices - This is used by the consumer to get the list of prices associated with a particular serviceId</li>

<li>selectService - Selection of a service is performed by the consumer, providing details of the service, the amount and at what price point it wants to purchase the service.</li>

<li>makePayment - This allows the consumer to request a payment be made at the producer device, by providing the total price response object as the request. The producer will then make the payment (or attempt to) and send back a Payment Response detailing whether it was successful or not.</li>

<li>beginServiceDelivery - This begins the service delivery, and is requested by the consumer, and will proceed as long as the correct information is provided to the producer. If the correct credentials are passed through, then the producer will start releasing the service known as a 'trusted trigger'</li>

<li>endServiceDelivery - This ends the service delivery, a request initiated by the consumer.</li>
</ul>


<h4>The wrapper objects</h4>
<p>WWTypes.py - contains all the Worldpay Within objects that you should use</p>
<ul>
<li>WWTotalPriceResponse - The calculated price details to return to the consumer before the payment is made</li>

<li>WWServiceMessage - Get the details of the producer device, including the description, and details of how to connect to it</li>

<li>WWServiceDetails - Gives you the serice ID and description of the service</li>

<li>WWServiceDeliveryToken - The token than contains details of the service, and used to exchange for release of the service</li>

<li>WWService - Details of the service, including ID and prices and description</li>

<li>WWPricePerUnit - The price per unit, including the amount and currency code</li>

<li>WWPrice - Contains details of the price, and price per unit</li>

<li>WWPaymentResponse - The response when a payment attempt has been made, with details of the payment and service</li>

<li>WWHCECard - The payment card credentials - there are test payment card credentials available</li>

<li>WWDevice  - The IoT device and details about the IoT device</li>

<li>WPWithinGeneralException - A exeption to capture and protect against the deep Thrift errors</li>
</ul>

<p><a href="sample-service-messaging.html">Please note the low level service messaging json spec can be found here</a></p>









<!-- Insert page content above -->
                    </div>                       
              </div>
            </div>
        </div>
     </div>






    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/what-input.js"></script>
    <script src="js/vendor/foundation.js"></script>
    <script src="js/app.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91392512-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
